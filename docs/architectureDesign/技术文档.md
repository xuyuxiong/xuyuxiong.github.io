# 整体架构设计v1.0
- 需求
需求文档
- 范围
三种角色对应三个方面（平台）：普通用户使用的 H5（前台）、企业或者说 H5 作者们使用的编辑器（中台）、平台管理员使用的管理系统（后台）。

1. 普通用户使用的 H5 端（C端）
使用者和用途：普通用户，也就是作品的受众，可以对作品进行分享，对业务增长负责。
开发方式：H5 SSR 的方式。
2. 企业/作者们使用的 B 端（B端）
使用者和用途：企业、H5 作品的作者们可以在此产出自己的海报作品，也就是可以创建、发布、编辑作品
开发方式：前后端分离的方式由 editor-fe + editor-server 构成。
3. 平台管理员使用的管理系统（后台）
使用者和用途：慕课乐高这个平台的管理员使用的后台管理系统，可以在此对作品进行管理，如用户管理、模板管理、作品管理以及数据统计（统计这部分也会用到第三方，比如百度统计）。
开发方式：前后端分离的方式由 admin-fe + admin-server 构成。
整体设计、架构设计、没有细节
- 模块设计
![module](https://pic.imgdb.cn/item/60a1172c6ae4f77d358800b3.jpg)
模块的拆分和关系图
模块的关键功能、职责等
特殊的模块重点说明
  组件库,独立第三方,同时用于编辑器和H5
  自研统计服务 为何自研
- 作品的数据结构
```js
{
  work: {
      title: '作品标题',
      setting: {}, // 一些可能的配置项 扩展性保证
      props: {}, // 页面的一些设置 扩展性保证
      components: [
      {
          id: '1',
          name: '文本1',
          tag: 'text',
          attrs: {
              fontSize: '20px'
          },
          children: ['文本1']
      },
      {
          id: '2',
          name: '图片1',
          tag: 'image',
          attrs: {
              src: 'xxx.png',
              width: '120px'
          },
          children: null
      }
    ]
  }
}
```
vuex store的结构 解释
一个核心： B端、C端和管理后台都共用一个数据库。
  创建作品：初始化一个JSON数据
  发布作品：给后端发请求，对JSON数据修改一个标记
  保存作品：给后端发请求，保存JSON数据
  C端浏览作品： 获取JSON数据，使用SSR渲染页面
  屏蔽作品： 给后端发请求，修改一个标记，C端来判断是否显示
数据流转关系图
![data](https://pic.imgdb.cn/item/60a116dc6ae4f77d35848d14.jpg)
- 扩展性保证
扩展组件 数据结构层面
扩展编辑器功能,例如：组件隐藏 锁定
扩展页面的配置(讨论、集思广益)
- 开发提效
脚手架
组件平台
- 运维保障
线上服务和运维服务
安全
监控和报警
服务拓展性：流量大